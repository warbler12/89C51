ORG 0000H
SJMP START
ORG 0080H

START:

STATE1:
MOV A,#30H
MOV B,#01H
LOOPA:
MOV P1,#00H
CALL DELAY1
MOV P1,#0FFH
CALL DELAY2
JZ STATE2
JMP LOOPA


DELAY1:MOV R3,A
DEC A
LOOP1:
MOV R4,#20
DJNZ R4,$
DJNZ R3,LOOP1
RET


DELAY2:MOV R3,B
INC B
LOOP2:
MOV R4,#20
DJNZ R4,$
DJNZ R3,LOOP2
RET

STATE2:
MOV A,#30H
MOV B,#01H
LOOPB:
MOV P1,#0FFH
CALL DELAY1
MOV P1,#00H
CALL DELAY2
JZ STATE1
JMP LOOPB
END
